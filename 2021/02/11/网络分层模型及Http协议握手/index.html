<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>网络分层模型及Http协议握手 | Royal&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="分层概念应用层 网络服务与最终用户的一个接口。 协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP">
<meta property="og:type" content="article">
<meta property="og:title" content="网络分层模型及Http协议握手">
<meta property="og:url" content="https://royal119790617.github.io/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/index.html">
<meta property="og:site_name" content="Royal&#39;s Blog">
<meta property="og:description" content="分层概念应用层 网络服务与最终用户的一个接口。 协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://royal119790617.github.io/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/threeTimes.jpeg">
<meta property="og:image" content="https://royal119790617.github.io/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/fourTimes.jpeg">
<meta property="article:published_time" content="2021-02-11T01:11:41.000Z">
<meta property="article:modified_time" content="2021-02-22T03:12:22.824Z">
<meta property="article:author" content="Royal">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://royal119790617.github.io/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/threeTimes.jpeg">
  
    <link rel="alternate" href="/atom.xml" title="Royal's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Royal&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://royal119790617.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-网络分层模型及Http协议握手" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/" class="article-date">
  <time class="dt-published" datetime="2021-02-11T01:11:41.000Z" itemprop="datePublished">2021-02-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/network/">network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      网络分层模型及Http协议握手
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="分层概念"><a href="#分层概念" class="headerlink" title="分层概念"></a>分层概念</h2><h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><ul>
<li>网络服务与最终用户的一个接口。</li>
<li>协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP<a id="more"></a>
<h3 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h3></li>
<li>数据的表示、安全、压缩。（在五层模型里面已经合并到了应用层）</li>
<li>格式有，JPEG、ASCll、EBCDIC、加密格式等</li>
</ul>
<h3 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h3><ul>
<li>建立、管理、终止会话。（在五层模型里面已经合并到了应用层）</li>
<li>对应主机进程，指本地主机与远程主机正在进行的会话</li>
</ul>
<h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><ul>
<li>定义传输数据的协议端口号，以及流控和差错校验。</li>
<li>协议有：TCP UDP，数据包一旦离开网卡即进入网络传输层</li>
</ul>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><ul>
<li>进行逻辑地址寻址，实现不同网络之间的路径选择。</li>
<li>协议有：ICMP IGMP IP（IPV4 IPV6）</li>
</ul>
<h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3><ul>
<li>建立逻辑连接、进行硬件地址寻址、差错校验等功能。（由底层网络定义协议）</li>
<li>将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。</li>
</ul>
<h3 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h3><ul>
<li>建立、维护、断开物理连接。（由底层网络定义协议）</li>
<li>TCP/IP 层级模型结构，应用层之间的协议通过逐级调用传输层（Transport layer）、网络层（Network Layer）和物理数据链路层（Physical Data Link）而可以实现应用层的应用程序通信互联。</li>
</ul>
<h4 id="应用层需要关心应用程序的逻辑细节，而不是数据在网络中的传输活动。应用层其下三层则处理真正的通信细节。在-Internet-整个发展过程中的所有思想和着重点都以一种称为-RFC（Request-For-Comments）的文档格式存在。针对每一种特定的-TCP-IP-应用，有相应的-RFC-文档。"><a href="#应用层需要关心应用程序的逻辑细节，而不是数据在网络中的传输活动。应用层其下三层则处理真正的通信细节。在-Internet-整个发展过程中的所有思想和着重点都以一种称为-RFC（Request-For-Comments）的文档格式存在。针对每一种特定的-TCP-IP-应用，有相应的-RFC-文档。" class="headerlink" title="应用层需要关心应用程序的逻辑细节，而不是数据在网络中的传输活动。应用层其下三层则处理真正的通信细节。在 Internet 整个发展过程中的所有思想和着重点都以一种称为 RFC（Request For Comments）的文档格式存在。针对每一种特定的 TCP/IP 应用，有相应的 RFC 文档。"></a>应用层需要关心应用程序的逻辑细节，而不是数据在网络中的传输活动。应用层其下三层则处理真正的通信细节。在 Internet 整个发展过程中的所有思想和着重点都以一种称为 RFC（Request For Comments）的文档格式存在。针对每一种特定的 TCP/IP 应用，有相应的 RFC 文档。</h4><ul>
<li>一些典型的 TCP/IP 应用有 FTP、Telnet、SMTP、SNTP、REXEC、TFTP、LPD、SNMP、NFS、INETD 等。RFC 使一些基本相同的 TCP/IP 应用程序实现了标准化，从而使得不同厂家开发的应用程序可以互相通信</li>
</ul>
<h2 id="Http三次握手和四次挥手"><a href="#Http三次握手和四次挥手" class="headerlink" title="Http三次握手和四次挥手"></a>Http三次握手和四次挥手</h2><ul>
<li>1、Http请求是基于Tcp connection这个链接的</li>
<li>2、位码即tcp标志位,有6种标示:SYN(synchronous建立联机) 、ACK(acknowledgement 确认)、PSH(push传送)FIN(finish结束)、RST(reset重置)、 URG(urgent紧急)、Sequence number(顺序号码)、Acknowledge number(确认号码)</li>
</ul>
<h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h3><p><img src="threeTimes.jpeg"></p>
<h4 id="第一次握手：主机A发送位码为syn＝1-随机产生seq-number-1234567的数据包到服务器，主机B由SYN-1知道，A要求建立联机；"><a href="#第一次握手：主机A发送位码为syn＝1-随机产生seq-number-1234567的数据包到服务器，主机B由SYN-1知道，A要求建立联机；" class="headerlink" title="第一次握手：主机A发送位码为syn＝1,随机产生seq number=1234567的数据包到服务器，主机B由SYN=1知道，A要求建立联机；"></a>第一次握手：主机A发送位码为syn＝1,随机产生seq number=1234567的数据包到服务器，主机B由SYN=1知道，A要求建立联机；</h4><h4 id="第二次握手：主机B收到请求后要确认联机信息，向A发送ack-number-主机A的seq-1-syn-1-ack-1-随机产生seq-7654321的包；"><a href="#第二次握手：主机B收到请求后要确认联机信息，向A发送ack-number-主机A的seq-1-syn-1-ack-1-随机产生seq-7654321的包；" class="headerlink" title="第二次握手：主机B收到请求后要确认联机信息，向A发送ack number=(主机A的seq+1),syn=1,ack=1,随机产生seq=7654321的包；"></a>第二次握手：主机B收到请求后要确认联机信息，向A发送ack number=(主机A的seq+1),syn=1,ack=1,随机产生seq=7654321的包；</h4><h4 id="第三次握手：主机A收到后检查ack-number是否正确，即第一次发送的seq-number-1-以及位码ack是否为1，若正确，主机A会再发送ack-number-主机B的seq-1-ack-1，主机B收到后确认seq值与ack-1则连接建立成功。"><a href="#第三次握手：主机A收到后检查ack-number是否正确，即第一次发送的seq-number-1-以及位码ack是否为1，若正确，主机A会再发送ack-number-主机B的seq-1-ack-1，主机B收到后确认seq值与ack-1则连接建立成功。" class="headerlink" title="第三次握手：主机A收到后检查ack number是否正确，即第一次发送的seq number+1,以及位码ack是否为1，若正确，主机A会再发送ack number=(主机B的seq+1),ack=1，主机B收到后确认seq值与ack=1则连接建立成功。"></a>第三次握手：主机A收到后检查ack number是否正确，即第一次发送的seq number+1,以及位码ack是否为1，若正确，主机A会再发送ack number=(主机B的seq+1),ack=1，主机B收到后确认seq值与ack=1则连接建立成功。</h4><h3 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h3><p><img src="fourTimes.jpeg"></p>
<h4 id="第一次挥手：TCP发送一个FIN-结束-，用来关闭客户到服务端的连接。"><a href="#第一次挥手：TCP发送一个FIN-结束-，用来关闭客户到服务端的连接。" class="headerlink" title="第一次挥手：TCP发送一个FIN(结束)，用来关闭客户到服务端的连接。"></a>第一次挥手：TCP发送一个FIN(结束)，用来关闭客户到服务端的连接。</h4><h4 id="第二次挥手：服务端收到这个FIN，他发回一个ACK-确认-，确认收到序号为收到序号-1，和SYN一样，一个FIN将占用一个序号。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。（服务器端继续发送未发送完的数据）"><a href="#第二次挥手：服务端收到这个FIN，他发回一个ACK-确认-，确认收到序号为收到序号-1，和SYN一样，一个FIN将占用一个序号。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。（服务器端继续发送未发送完的数据）" class="headerlink" title="第二次挥手：服务端收到这个FIN，他发回一个ACK(确认)，确认收到序号为收到序号+1，和SYN一样，一个FIN将占用一个序号。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。（服务器端继续发送未发送完的数据）"></a>第二次挥手：服务端收到这个FIN，他发回一个ACK(确认)，确认收到序号为收到序号+1，和SYN一样，一个FIN将占用一个序号。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。（服务器端继续发送未发送完的数据）</h4><h4 id="第三次挥手：服务端发送一个FIN-结束-到客户端，服务端关闭客户端的连接。"><a href="#第三次挥手：服务端发送一个FIN-结束-到客户端，服务端关闭客户端的连接。" class="headerlink" title="第三次挥手：服务端发送一个FIN(结束)到客户端，服务端关闭客户端的连接。"></a>第三次挥手：服务端发送一个FIN(结束)到客户端，服务端关闭客户端的连接。</h4><h4 id="第四次挥手：客户端发送ACK-确认-报文确认，并将确认的序号-1，这样关闭完成。"><a href="#第四次挥手：客户端发送ACK-确认-报文确认，并将确认的序号-1，这样关闭完成。" class="headerlink" title="第四次挥手：客户端发送ACK(确认)报文确认，并将确认的序号+1，这样关闭完成。"></a>第四次挥手：客户端发送ACK(确认)报文确认，并将确认的序号+1，这样关闭完成。</h4><h2 id="TCP和UDP的区别"><a href="#TCP和UDP的区别" class="headerlink" title="TCP和UDP的区别"></a>TCP和UDP的区别</h2><h3 id="1、TCP面向连接（如打电话要先拨号建立连接）；UDP是无连接的，即发送数据之前不需要建立连接（连接和无连接）"><a href="#1、TCP面向连接（如打电话要先拨号建立连接）；UDP是无连接的，即发送数据之前不需要建立连接（连接和无连接）" class="headerlink" title="1、TCP面向连接（如打电话要先拨号建立连接）；UDP是无连接的，即发送数据之前不需要建立连接（连接和无连接）"></a>1、TCP面向连接（如打电话要先拨号建立连接）；UDP是无连接的，即发送数据之前不需要建立连接（连接和无连接）</h3><h3 id="2、TCP提供可靠的服务。即通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达-UDP尽最大努力交付，即不保证可靠交付（可靠和不可靠）"><a href="#2、TCP提供可靠的服务。即通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达-UDP尽最大努力交付，即不保证可靠交付（可靠和不可靠）" class="headerlink" title="2、TCP提供可靠的服务。即通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付（可靠和不可靠）"></a>2、TCP提供可靠的服务。即通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付（可靠和不可靠）</h3><h3 id="3、TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流；UDP是面向报文的UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）（字节流和报文加拥塞）"><a href="#3、TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流；UDP是面向报文的UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）（字节流和报文加拥塞）" class="headerlink" title="3、TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流；UDP是面向报文的UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）（字节流和报文加拥塞）"></a>3、TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流；UDP是面向报文的UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）（字节流和报文加拥塞）</h3><h4 id="4、每一条TCP连接只能是点到点的-UDP支持一对一，一对多，多对一和多对多的交互通信（一对一和一对多）"><a href="#4、每一条TCP连接只能是点到点的-UDP支持一对一，一对多，多对一和多对多的交互通信（一对一和一对多）" class="headerlink" title="4、每一条TCP连接只能是点到点的; UDP支持一对一，一对多，多对一和多对多的交互通信（一对一和一对多）"></a>4、每一条TCP连接只能是点到点的; UDP支持一对一，一对多，多对一和多对多的交互通信（一对一和一对多）</h4><h4 id="5、TCP首部开销20字节-UDP的首部开销小，只有8个字节（开销问题）"><a href="#5、TCP首部开销20字节-UDP的首部开销小，只有8个字节（开销问题）" class="headerlink" title="5、TCP首部开销20字节;UDP的首部开销小，只有8个字节（开销问题）"></a>5、TCP首部开销20字节;UDP的首部开销小，只有8个字节（开销问题）</h4><h4 id="6、TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道"><a href="#6、TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道" class="headerlink" title="6、TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道"></a>6、TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://royal119790617.github.io/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/" data-id="cklfz01hz0000ncv8f2mbgg0h" data-title="网络分层模型及Http协议握手" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/02/10/%E8%AE%B0%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">记用hexo搭建个人博客及使用心得</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/antd/">antd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tips/">tips</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/02/11/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B%E5%8F%8AHttp%E5%8D%8F%E8%AE%AE%E6%8F%A1%E6%89%8B/">网络分层模型及Http协议握手</a>
          </li>
        
          <li>
            <a href="/2021/02/10/%E8%AE%B0%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/">记用hexo搭建个人博客及使用心得</a>
          </li>
        
          <li>
            <a href="/2021/02/09/docker-compose%E5%AE%89%E8%A3%85mysql8-0%E9%9B%86%E7%BE%A4/">mysql8.0主从集群搭建</a>
          </li>
        
          <li>
            <a href="/2021/02/08/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/02/08/antd%E4%B9%8B%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB/">antd之父子关系</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Royal<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>